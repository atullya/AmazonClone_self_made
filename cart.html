<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <!-- Font Awesome CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <title>Amazon Clone</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
    ></script>
  </head>
  <link rel="stylesheet" href="cart.css" />
  <body>
    <header>
      <nav>
        <div class="nav-left">
          <div class="nav-logo">
            <img
              src="https://media.geeksforgeeks.org/wp-content/uploads/20240326183545/amazon.png"
            />
          </div>
          <div class="location">
            <p class="top-text">Deliver to</p>
            <div class="location-icon">
              <i class="fa-solid fa-location-dot"></i>
              <p class="bottom-text">Nepal</p>
            </div>
          </div>
        </div>

        <div class="nav-center">
          <select class="search-dropdown">
            <option>All</option>
            <option>All Departments</option>
            <option>Arts & Crafts</option>
          </select>
          <input type="text" placeholder="Search Amazon" class="search-box" />
          <div class="search-icon">
            <i class="fa-solid fa-magnifying-glass" style="color: #28416c"> </i>
          </div>
        </div>

        <div class="nav-right">
          <div class="language-option">
            <div class="flag">
              <i class="fa-regular fa-flag"></i>
            </div>
            <select class="select-language">
              <option value="lan">EN</option>
              <option value="lan">ES</option>
              <option value="lan">AR</option>
            </select>
          </div>

          <div class="account-option">
            <p class="top-text">Hello, sign in</p>
            <select class="select-account">
              <option value="Account">Account & Lists</option>
              <option value="Account">Account & Lists</option>
              <option value="Account">Account & Lists</option>
            </select>
          </div>

          <div class="order-option">
            <p class="top-text">Returns</p>
            <p class="bottom-text">& Orders</p>
          </div>

          <div class="cart-option">
            <div class="cart-logo">
              <a href="cart.html"><i class="fa-solid fa-cart-shopping"></i></a>
              <label for="" class="counter">0</label>
            </div>
            Cart
          </div>
        </div>
      </nav>
    </header>

    <div class="cartitems">
      <div class="cartitems-format-main">
        <p>Products</p>
        <p>Title</p>
        <p>Price</p>
        <p>Quantity</p>
        <p>Total</p>
        <p>Remove</p>
      </div>
      <hr />

      <div class="showCart" id="showCart"></div>

      <div class="cartitems-down">
        <div class="cartitems-total">
          <h1>Cart Totals</h1>
          <div>
            <div class="cartitems-total-item">
              <p>Subtotal</p>
              <p class="totall">Rs0</p>
            </div>
            <hr />
            <div class="cartitems-total-item">
              <p>Shipping Fee</p>
              <p>Free</p>
            </div>
            <hr />
            <div class="cartitems-total-item">
              <h3>Total</h3>
              <h3 class="totall"></h3>
            </div>
          </div>
          <button>Procced to Checkout</button>
        </div>
        <div class="cartitems-promocode">
          <p>If you have a promo code, Enter it here</p>
          <div class="cartites-promobox">
            <input type="text" placeholder="promo code" />
            <button>Submit</button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Define the show function
      function show() {
        let cart = localStorage.getItem("cartItems");
        cart = cart ? JSON.parse(cart) : [];

        let total = 0;
        for (i = 0; i < cart.length; i++) {
          total += cart[i].priceCents * cart[i].quantity;
        }
        console.log(total);
        let totallElements = document.querySelectorAll(".totall");
        // Update each element
        totallElements.forEach((element) => {
          element.innerHTML = total;
        });

        let content = "";
        cart.forEach((element, index) => {
          content += `
           <div class="cartitems-format cartitems-format-mainn">
          <img src="${element.image}"  alt="" class="carticon-product-icon" />
          <p>${element.name}</p>
          <p>Rs ${element.priceCents}</p>
          <p>${element.quantity}</p>
          <p>Rs. ${element.priceCents * element.quantity}</p>
          
          <button class="cartitems-quantity" onclick="removeItem(${index})">  <ion-icon name="close-outline"></ion-icon></button>
          </div>
          <hr />
          `;
        });
        document.getElementById("showCart").innerHTML = content;
      }
      let counter1 = document.querySelector(".counter");
      let cooun = localStorage.getItem("counter");

      counter1.innerHTML = cooun ? cooun : "0";
      // Define the removeItem function
      function removeItem(index) {
        let cart = localStorage.getItem("cartItems");
        cart = cart ? JSON.parse(cart) : [];
        let quantities = localStorage.getItem("quantities");
        quantities = quantities ? JSON.parse(quantities) : [];

        // Decrement the quantity of the item at the specified index
        if (cart[index].quantity > 1) {
          cart[index].quantity--;
        } else {
          // If the quantity is 1, remove the item from the cart
          cart.splice(index, 1);
          quantities.splice(index, 1);
        }

        localStorage.setItem("cartItems", JSON.stringify(cart)); // Update the localStorage with the new cart array
        localStorage.setItem("quantities", JSON.stringify(quantities)); // Update the quantities array in localStorage
        show(); // Updates the display of items to reflect the removal

        let cooun = localStorage.getItem("counter");
        cooun = cooun ? parseInt(cooun) : 0;

        if (cooun > 0) {
          cooun--; // Decrement only if counter is greater than zero
        }

        localStorage.setItem("counter", cooun);
        counter1.innerHTML = cooun; // Update the counter display
      }

      // Call show function on window load
      window.onload = show;
    </script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      .container {
        padding: 70px;
        background-color: #eff0f5;
      }
      .container .allItem {
        display: flex;

        gap: 80px;
        background-color: #ffff;
        padding: 30px;
        justify-content: center;
      }
      .container .allItem .details h2 {
        font-family: Arial, Helvetica, sans-serif;
        margin-bottom: 20px;
      }
      /* .container .allItem .details .ratings {
        margin-top: 20px;
      } */
      .container .allItem .details .category {
        margin-bottom: 20px;
      }
      .container .allItem .details .price span {
        font-size: 30px;
        color: #e6aa34;
        font-weight: 700;
      }
      .container .allItem .details .price p {
        font-size: 17px;
        color: #222f3d;
        font-weight: 700;
      }
      .container .allItem .details .price p del {
        font-size: 17px;
        color: #adaba5;
        font-weight: 700;
      }
      .container .allItem .details .quantity {
        margin: 10px 0;
      }
      .container .allItem .details label {
        font-size: 18px;
        font-family: Arial, Helvetica, sans-serif;
      }
      .container .allItem .details input {
        padding: 4px;
      }
      .container .allItem .details .button {
        display: flex;
        padding: 10px 0;
        gap: 35px;
      }
      .container .allItem .details .button button {
        outline: none;
        padding: 10px 32px;
      }
      .container .allItem .details .button button {
        outline: none;
        padding: 13px 32px;
        border: none;
        border-radius: 5px;
      }
      .container .allItem .details .button .buynow {
        background-color: #222f3d;
        color: white;
      }
      .container .allItem .details .button .addtocart {
        background-color: #0f1111;
        color: white;
      }
      .checked {
        color: orange;
      }
      body {
        height: 100vh;
        font-family: Arial;
      }

      /* Header  */
      nav {
        height: 60px;
        display: flex;
        align-items: center;
        background-color: #0f1111;
        color: white;
      }

      .nav-left {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-left: 0.5rem;
      }

      .nav-logo img {
        width: 100px;
        padding: 0.5rem;
      }

      .nav-logo:hover {
        outline: 1px solid white;
      }

      .location {
        height: 100%;
        font-size: 0.7rem;
        padding: 0.5rem 1rem;
      }

      .location:hover {
        outline: 1px solid white;
      }

      .location-icon {
        display: flex;
        align-items: center;
      }

      .nav-center {
        height: 40px;
        display: flex;
        flex-grow: 1;
        border-radius: 5px;
        margin-left: 1rem;
      }

      .nav-center:hover {
        outline: 2px solid rgb(232, 176, 73);
      }

      .search-dropdown {
        width: 5rem;
        font-size: 1rem;
        background-color: rgb(210, 208, 208);
        padding: 0.5rem;
        border-radius: 5px 0 0 5px;
        outline: none;
      }

      .search-dropdown:focus {
        outline: none;
      }

      .search-box {
        font-size: 1rem;
        flex-grow: 1;
        padding: 0.5rem;
      }

      .search-box:focus {
        outline: none;
      }

      .search-icon i {
        height: 100%;
        background-color: rgba(255, 203, 105, 0.849);
        border-radius: 0 5px 5px 0;
        padding: 0.7rem 0.5rem;
        outline: none;
      }

      .nav-right {
        display: flex;
        align-items: center;
        margin: 0 1rem;
      }

      .language-option {
        display: flex;
        padding: 0.5rem 0.5rem;
      }

      .language-option:hover {
        outline: 1px solid white;
      }

      .flag {
        width: 20px;
      }

      .select-language {
        font-size: 0.7rem;
        font-weight: bold;
        color: white;
        background: transparent;
        border: none;
      }

      .select-language option {
        color: black;
      }

      .account-option {
        padding: 0.5rem 0.5rem;
      }

      .account-option:hover {
        outline: 1px solid white;
      }

      .account-option .top-text {
        font-size: 0.5rem;
        margin-left: 5px;
      }

      .select-account {
        font-size: 0.7rem;
        font-weight: bold;
        background: transparent;
        color: white;
        border: none;
      }

      .order-option {
        padding: 0.5rem 0.5rem;
      }

      .order-option:hover {
        outline: 1px solid white;
      }

      .order-option .top-text {
        font-size: 0.5rem;
      }

      .order-option .bottom-text {
        font-size: 0.7rem;
        font-weight: bold;
      }

      .cart-option {
        display: flex;
        align-items: center;
        font-size: 0.8rem;
        font-weight: 700;
        padding: 0.5rem 0.5rem;
      }

      .cart-option:hover {
        outline: 1px solid white;
      }

      .cart-logo i {
        width: 20px;
      }

      .nav-options {
        height: 42px;
        display: flex;
        align-items: center;
        background-color: #222f3d;
        color: white;
        justify-content: start;
      }

      .nav-options * {
        cursor: pointer;
      }

      .all-logo {
        display: flex;
        align-items: center;
        gap: 0.3rem;
        padding: 0.5rem;
        margin-left: 2rem;
      }

      .all-logo:hover {
        outline: 1px solid white;
      }

      .nav-options .options {
        display: flex;
      }

      .nav-options .options p {
        padding: 0.5rem;
      }

      .nav-options .options p:hover {
        outline: 1px solid white;
      }
    </style>
  </body>
</html>
